(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{331:function(e,s,n){"use strict";n.r(s);var t=n(3),a=Object(t.a)({},(function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p",[e._v("由于谷歌在Monorepo上的实践，Monorepo受到了越来越多的关注。Monorepo意味着把所有项目的所有代码统一维护在一个单一的代码版本库中，和多代码库方案相比，两者各有优劣，需要根据公司文化和产品特性进行取舍。原文：What is monorepo? (and should you use it?)"),n("sup",[e._v("[1]")])]),e._v(" "),n("h2",{attrs:{id:"monorepo-介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#monorepo-介绍"}},[e._v("#")]),e._v(" monorepo 介绍")]),e._v(" "),n("p",[e._v("monorepo 的意思是在版本控制系统的单个代码库里包含了许多项目的代码。这些项目有可能是相关的，但通常逻辑是独立的，并由不同团队维护。")]),e._v(" "),n("h2",{attrs:{id:"monrepo-相比于-multirepo-的优势"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#monrepo-相比于-multirepo-的优势"}},[e._v("#")]),e._v(" monrepo 相比于 multirepo 的优势")]),e._v(" "),n("p",[e._v("与 monrepo (单一代码库) 相反的是 multirepo (多代码库)，每个项目都储存在一个完全独立、版本控制的代码库中。")]),e._v(" "),n("p",[e._v("单一代码库的好处：")]),e._v(" "),n("ol",[n("li",[n("p",[n("strong",[e._v("可见性(Visibility):")]),e._v(" 每个人都可以看到其他人的代码")])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("一致性(Consistency):")]),e._v(" 将所有代码库放在一起，执行代码质量标准和统一的风格会更容易")])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("简单的依赖关系管理(Simpler dependency management):")]),e._v(" 共享依赖关系很简单，因为所有模块都托管在同一个存储库中，因此都不需要包管理器")])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("统一的构建流程(Unified build process):")]),e._v(" 代码库中的每个应用程序可以共享一致的构建流程")])])]),e._v(" "),n("p",[e._v("单一代码库的缺陷：")]),e._v(" "),n("ol",[n("li",[n("p",[n("strong",[e._v("学习曲线(Learning curve):")]),e._v(" 如果项目中包含许多紧密耦合的项目，学习曲线会变得更陡峭")])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("破环主线(Broken main):")]),e._v(" 主线损坏会影响在单一代码库工作中的每一个人")])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("Code Review:")]),e._v(" 会变得非常难控制且复杂")])])]),e._v(" "),n("h2",{attrs:{id:"monorepo-实战"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#monorepo-实战"}},[e._v("#")]),e._v(" monorepo 实战")]),e._v(" "),n("h3",{attrs:{id:"项目初始化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#项目初始化"}},[e._v("#")]),e._v(" 项目初始化")]),e._v(" "),n("blockquote",[n("p",[e._v("使用 pnpm 作为包管理工具")])]),e._v(" "),n("p",[e._v("第一步: 创建一个vue3的项目")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("pnpm create vue@3\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("第二步：配置 "),n("code",[e._v("pnpm-workspace.yaml")])]),e._v(" "),n("p",[n("a",{attrs:{href:"https://www.pnpm.cn/pnpm-workspace_yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方文档"),n("OutboundLink")],1)]),e._v(" "),n("div",{staticClass:"language-pnpm-workspace.yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("packages:\n  # all packages in direct subdirs of packages/\n  - 'packages/*'\n  # all packages in subdirs of components/\n  - 'components/**'\n  # all apis base on axios for http/https\n  - 'apis/**'\n  # common functions\n  - 'utils/**'\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br")])]),n("p",[e._v("第三步：在根目录创建 "),n("code",[e._v("packages")]),e._v("、"),n("code",[e._v("components")]),e._v("、"),n("code",[e._v("apis")]),e._v("、"),n("code",[e._v("utils")]),e._v(" 文件夹")]),e._v(" "),n("p",[e._v("第四步：在各自文件夹中创建各自项目")]),e._v(" "),n("p",[e._v("第五步：修改 "),n("code",[e._v("package.json")]),e._v(" 中的 "),n("code",[e._v("name")]),e._v(", 添加统一的前缀以及修改版本号并增加入口文件")]),e._v(" "),n("p",[e._v("第六步: 添加工作区的包")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("pnpm add @**/utils\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[e._v("References && 参考")]),e._v(" "),n("p",[e._v("[1] "),n("a",{attrs:{href:"https://semaphoreci.com/blog/what-is-monorepo",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://semaphoreci.com/blog/what-is-monorepo"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("[2] "),n("a",{attrs:{href:"https://www.jianshu.com/p/c10d0b8c5581",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.jianshu.com/p/c10d0b8c5581"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("[3] "),n("a",{attrs:{href:"https://www.bilibili.com/video/BV1vf4y1Z753?spm_id_from=333.1007.top_right_bar_window_history.content.click&vd_source=2654946680fbd77cc78e1cbc75cbaf4d",target:"_blank",rel:"noopener noreferrer"}},[e._v("三十分钟实战 pnpm monorepo"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=a.exports}}]);